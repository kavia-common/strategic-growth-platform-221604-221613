{"is_source_file": true, "format": "SQL", "description": "This file defines a PostgreSQL trigger and function to automatically onboard new users by creating related organization and profile records. It is used to ensure user onboarding occurs even if external mechanisms like webhooks fail.", "external_files": ["public.profiles", "public.organizations", "auth.users"], "external_methods": ["COALESCE", "TRIM", "LOWER", "COUNT", "RAISE NOTICE", "RAISE WARNING", "SELECT", "INSERT"], "published": ["public.handle_new_user_onboarding", "on_auth_user_created"], "classes": [], "methods": [{"name": "public.handle_new_user_onboarding", "description": "Function triggered after a new user is inserted; it checks for existing profile, creates organization if needed, and creates a user profile."}], "calls": ["public.profiles", "public.organizations", "auth.users", "COALESCE", "TRIM", "LOWER", "COUNT", "RAISE NOTICE", "RAISE WARNING", "SELECT", "INSERT"], "search-terms": ["user onboarding trigger", "public.handle_new_user_onboarding", "auth.users trigger", "organization creation", "profile creation", "PostgreSQL trigger", "SQL onboarding"], "state": 2, "file_id": 48, "knowledge_revision": 132, "git_revision": "", "hash": "64cbf48eaa49a2786a51d62ae52fb621", "format-version": 4, "code-base-name": "sge_backend", "filename": "sge_backend/database/trigger_user_onboarding.sql", "revision_history": [{"132": ""}]}