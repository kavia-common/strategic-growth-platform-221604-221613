{"is_source_file": true, "format": "JavaScript", "description": "This file is a controller module for managing chat conversations and messages in an Express.js backend. It handles creating conversations, listing conversations and messages, and sending messages, storing data in-memory. It defines route handler functions for chat-related endpoints.", "external_files": ["../utils/supabase"], "external_methods": ["require('express-async-handler')"], "published": ["createConversation", "listConversations", "listMessages", "sendMessage"], "classes": [], "methods": [{"name": "createConversation", "description": "Creates a new chat conversation instance, assigning it an ID and storing it in-memory."}, {"name": "listConversations", "description": "Returns active conversations for the authenticated user, sorted by creation date descending."}, {"name": "listMessages", "description": "Retrieves messages for a specific conversation, sorted by creation date ascending."}, {"name": "sendMessage", "description": "Handles sending a message within a conversation, creating a new conversation if needed, stores user and assistant messages, and responds with the message objects."}], "calls": ["asyncHandler", "generateId", "res.status", "res.json", "conversations.push", "messages.push", "new Date()", "new Date().toISOString()", "new Date(Date.now() + 50).toISOString()", "conversations.filter", "userConvs.sort", "messages.filter", "chatMessages.sort"], "search-terms": ["chatController", "Express.js", "In-memory chat storage", "createConversation", "listConversations", "listMessages", "sendMessage"], "state": 2, "file_id": 18, "knowledge_revision": 122, "git_revision": "886d603d3cb6da4960c90dd78eee8640ddfd1810", "revision_history": [{"38": ""}, {"47": ""}, {"111": "886d603d3cb6da4960c90dd78eee8640ddfd1810"}, {"115": "886d603d3cb6da4960c90dd78eee8640ddfd1810"}, {"119": "886d603d3cb6da4960c90dd78eee8640ddfd1810"}, {"122": "886d603d3cb6da4960c90dd78eee8640ddfd1810"}], "ctags": [{"_type": "tag", "name": "asyncHandler", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const asyncHandler = require('express-async-handler');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "conversations", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const conversations = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "createConversation", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^  createConversation,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "createConversation", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const createConversation = asyncHandler(async (req, res) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "generateId", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const generateId = (prefix) => `${prefix}-${Date.now()}-${Math.floor(Math.random() * 1000)}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "listConversations", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const listConversations = asyncHandler(async (req, res) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "listMessages", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const listMessages = asyncHandler(async (req, res) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const messages = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "sendMessage", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/controllers/chatController.js", "pattern": "/^const sendMessage = asyncHandler(async (req, res) => {$/", "language": "JavaScript", "kind": "constant"}], "hash": "633a8d1929fb7dca270337db550072f7", "format-version": 4, "code-base-name": "sge_backend", "filename": "sge_backend/src/controllers/chatController.js", "fields": [{"name": "createConversation,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}]}