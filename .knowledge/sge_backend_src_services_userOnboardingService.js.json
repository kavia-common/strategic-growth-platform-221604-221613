{"is_source_file": true, "format": "JavaScript", "description": "This file implements a UserOnboardingService class in JavaScript that manages user onboarding operations such as finding or creating organizations and profiles, and checking onboarding status. It interacts with the database via the supabaseAdmin client for operations on 'organizations' and 'profiles' tables.", "external_files": ["../utils/supabase"], "external_methods": ["supabaseAdmin.from().select()", "supabaseAdmin.from().insert()"], "published": ["onboardUser", "isUserOnboarded"], "classes": [{"name": "UserOnboardingService", "description": "A class providing methods to handle user onboarding, including organization and profile management, and onboarding status checks."}], "methods": [{"name": "findOrCreateOrganization(orgName)", "description": "Finds an existing organization by name, or creates a new one if not found.", "scope": "UserOnboardingService", "scopeKind": "class"}, {"name": "createProfile(userId, orgId, fullName = null)", "description": "Creates a profile record associated with a user ID and organization ID, with optional full name.", "scope": "UserOnboardingService", "scopeKind": "class"}, {"name": "onboardUser(userId, metadata = {})", "description": "Orchestrates the onboarding process for a user, including organization and profile creation.", "scope": "UserOnboardingService", "scopeKind": "class"}, {"name": "isUserOnboarded(userId)", "description": "Checks whether a user has already been onboarded by verifying the existence of their profile.", "scope": "UserOnboardingService", "scopeKind": "class"}], "calls": ["supabaseAdmin.from('organizations').select()", "supabaseAdmin.from('organizations').insert()", "supabaseAdmin.from('profiles').insert()", "supabaseAdmin.from('profiles').select()", "supabaseAdmin.from('profiles').eq()"], "search-terms": ["UserOnboardingService", "findOrCreateOrganization", "createProfile", "onboardUser", "isUserOnboarded"], "state": 2, "file_id": 45, "knowledge_revision": 175, "git_revision": "b002bf593f1152f2939d5f6910112f31a6270934", "revision_history": [{"125": ""}, {"172": "b002bf593f1152f2939d5f6910112f31a6270934"}, {"173": "b002bf593f1152f2939d5f6910112f31a6270934"}, {"174": "b002bf593f1152f2939d5f6910112f31a6270934"}, {"175": "b002bf593f1152f2939d5f6910112f31a6270934"}], "ctags": [{"_type": "tag", "name": "UserOnboardingService", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^class UserOnboardingService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "createProfile", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^  async createProfile(userId, orgId, fullName = null) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, orgId, fullName = null)", "scope": "UserOnboardingService", "scopeKind": "class"}, {"_type": "tag", "name": "exports", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^module.exports = new UserOnboardingService();$/", "language": "JavaScript", "kind": "variable", "scope": "module", "scopeKind": "class"}, {"_type": "tag", "name": "findOrCreateOrganization", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^  async findOrCreateOrganization(orgName) {$/", "language": "JavaScript", "kind": "method", "signature": "(orgName)", "scope": "UserOnboardingService", "scopeKind": "class"}, {"_type": "tag", "name": "full_name", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^      full_name: fullName$/", "language": "JavaScript", "kind": "property", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^      id: userId,$/", "language": "JavaScript", "kind": "property", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class"}, {"_type": "tag", "name": "isUserOnboarded", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^  async isUserOnboarded(userId) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId)", "scope": "UserOnboardingService", "scopeKind": "class"}, {"_type": "tag", "name": "onboardUser", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^  async onboardUser(userId, metadata = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "(userId, metadata = {})", "scope": "UserOnboardingService", "scopeKind": "class"}, {"_type": "tag", "name": "org_id", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^      org_id: orgId,$/", "language": "JavaScript", "kind": "property", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class"}, {"_type": "tag", "name": "profileData", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^    const profileData = {$/", "language": "JavaScript", "kind": "class", "scope": "UserOnboardingService.createProfile", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221613/sge_backend/src/services/userOnboardingService.js", "pattern": "/^      role: 'member',$/", "language": "JavaScript", "kind": "property", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class"}], "hash": "cceae5426534f304791cc4712558ffa4", "format-version": 4, "code-base-name": "sge_backend", "filename": "sge_backend/src/services/userOnboardingService.js", "fields": [{"name": "module.exports = new UserOnboardingService();", "scope": "module", "scopeKind": "class", "description": "unavailable"}, {"name": "full_name: fullName", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class", "description": "unavailable"}, {"name": "id: userId,", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class", "description": "unavailable"}, {"name": "org_id: orgId,", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class", "description": "unavailable"}, {"name": "role: 'member',", "scope": "UserOnboardingService.createProfile.profileData", "scopeKind": "class", "description": "unavailable"}]}